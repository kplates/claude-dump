@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  *, ::before, ::after {
    border-color: var(--claude-border);
  }

  /* Dark theme (default) */
  :root {
    --claude-bg: #1a1a2e;
    --claude-surface: #16213e;
    --claude-accent: #e94560;
    --claude-text: #eaeaea;
    --claude-muted: #8892b0;
    --claude-border: #2a2a4a;
    --claude-user: #0f3460;
    --claude-assistant: #1a1a3e;
    --claude-diff-surface: #16213e;
    --claude-diff-del: rgba(233, 69, 96, 0.15);
    --claude-diff-ins: rgba(80, 200, 120, 0.15);
  }

  /* Light theme */
  .light {
    --claude-bg: #f5f5f5;
    --claude-surface: #ffffff;
    --claude-accent: #d63031;
    --claude-text: #1a1a2e;
    --claude-muted: #636e72;
    --claude-border: #dfe6e9;
    --claude-user: #dfe6e9;
    --claude-assistant: #f0f0f5;
    --claude-diff-surface: #ffffff;
    --claude-diff-del: rgba(233, 69, 96, 0.12);
    --claude-diff-ins: rgba(80, 200, 120, 0.12);
  }

  * {
    scrollbar-width: thin;
    scrollbar-color: var(--claude-border) transparent;
  }

  *::-webkit-scrollbar {
    width: 6px;
  }

  *::-webkit-scrollbar-track {
    background: transparent;
  }

  *::-webkit-scrollbar-thumb {
    background-color: var(--claude-border);
    border-radius: 3px;
  }

  pre code {
    font-size: 0.85rem;
    line-height: 1.5;
  }
}

/* diff2html overrides */
.d2h-wrapper {
  font-size: 0.85rem !important;
}

.d2h-file-header {
  display: none !important;
}

/* Reset all diff2html borders, padding, margins */
.d2h-wrapper *,
.d2h-wrapper *::before,
.d2h-wrapper *::after {
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
}

/* Unified background for the entire diff */
.d2h-file-wrapper,
.d2h-file-diff,
.d2h-code-wrapper,
.d2h-diff-table,
.d2h-diff-tbody,
.d2h-diff-tbody tr,
.d2h-diff-tbody td {
  background-color: var(--claude-diff-surface) !important;
  border: none !important;
  padding: 0 !important;
  margin: 0 !important;
}

.d2h-diff-table {
  border-collapse: separate !important;
  border-spacing: 0 !important;
}

/* Line numbers - just style the text, inherit background */
.d2h-code-linenumber,
.d2h-code-side-linenumber {
  color: var(--claude-muted) !important;
  position: static !important;
  padding: 0 8px !important;
  text-align: right !important;
  vertical-align: top !important;
  user-select: none;
}

/* In inline view, hide the old file line number */
.d2h-code-linenumber .line-num1 {
  display: none !important;
}

/* Code content */
.d2h-code-line,
.d2h-code-side-line {
  background-color: transparent !important;
  color: var(--claude-text) !important;
  width: auto !important;
  padding: 0 !important;
  display: block !important;
}

.d2h-code-line-ctn {
  background-color: transparent !important;
  white-space: pre-wrap !important;
  word-break: break-all !important;
}

.d2h-code-line-prefix {
  user-select: none;
}

/* Info header (@@ lines) */
.d2h-info {
  background-color: var(--claude-bg) !important;
  color: var(--claude-muted) !important;
  position: static !important;
}

.d2h-diff-tbody td.d2h-info,
.d2h-diff-tbody td.d2h-code-linenumber.d2h-info {
  background-color: var(--claude-bg) !important;
  width: 100% !important;
}

/* Deletions (red) */
.d2h-diff-tbody tr.d2h-del td,
.d2h-diff-tbody td.d2h-del {
  background-color: var(--claude-diff-del) !important;
}

/* Insertions (green) */
.d2h-diff-tbody tr.d2h-ins td,
.d2h-diff-tbody td.d2h-ins {
  background-color: var(--claude-diff-ins) !important;
}
